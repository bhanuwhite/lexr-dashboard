<div class="content-inner">
  <div class="px-4 pb-3 Categories">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-7">
          <div class="card my-4 p-3 border-none" style="border-radius: 20px">
            <div class="d-flex justify-content-between flex-wrap mb-3">
              <div class="text-black fw-500 title">Sentiment Performance</div>
              <div class="d-flex gap-2 dropdown-div">
                <p-dropdown
                  optionLabel="year"
                  [options]="formattedYears"
                  (onChange)="getByYearData($event)"
                ></p-dropdown>
              </div>
            </div>
            <p-chart
              type="bar"
              [data]="data"
              [options]="bargraphData"
              width="700"
            ></p-chart>
          </div>
        </div>
        <div class="col-lg-5">
          <div class="card my-4 p-3 border-none" style="border-radius: 20px">
            <div class="d-flex justify-content-between summ_mobile mb-5">
              <div class="text-black fw-500 title">
                Summary and Recommendation
              </div>
              <div class="d-flex gap-2 dropdown-div">
                <p-dropdown
                  [options]="allCategoriesOverTime"
                  (onChange)="getsummaryAndRecomendations($event)"
                  class="getsummary_details_drpdn"
                ></p-dropdown>
              </div>
            </div>
            <div
              class="this_week d-flex justify-content-center mt-5"
              *ngIf="loading"
            >
              <p-progressSpinner ariaLabel="loading"> </p-progressSpinner>
            </div>
            <div
              class="this_week mt-3"
              *ngIf="summaryRecomendations && !loading && !statusTrue"
            >
              <div class="my-3">
                <span class="this_week">{{
                  summaryRecomendations.summary
                }}</span>
              </div>
              <hr />
              <div class="this_week">
                <ul>
                  <li *ngFor="let item of summaryRecomendations?.recomendation">
                    {{ item.point }}
                  </li>
                </ul>
              </div>
            </div>
            <div
              class="this_week d-flex justify-content-center mt-5"
              *ngIf="!loading && statusTrue === true"
            >
              No data available for this Category.
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-8 card border-none">
          <app-graph-component title="Category over Time"></app-graph-component>
        </div>
        <div class="col-lg-4">
          <div
            class="card p-3 my-0 top_category border-none"
            style="border-radius: 20px"
          >
            <div class="d-flex justify-content-between mb-2">
              <div class="text-black fw-500 title">Top Category</div>
            </div>
            <div class="chart_title">
              <span class="square"></span> Number of reviews per category
            </div>
            <div
              *ngIf="doughnutChartLoader"
              class="d-flex justify-content-center mt-5 pt-5"
            >
              <p-progressSpinner></p-progressSpinner>
            </div>
            <div
              id="pieChart"
              style="height: 600px; display: flex; text-align: center"
            ></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
